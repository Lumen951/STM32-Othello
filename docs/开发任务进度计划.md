# STM32é»‘ç™½æ£‹æ¸¸æˆå¼€å‘ä»»åŠ¡è¿›åº¦è®¡åˆ’
# STM32 Othello Game Development Task Progress Plan

**é¡¹ç›®ç‰ˆæœ¬**: v1.0
**ç›®æ ‡ç¡¬ä»¶**: STM32F103C8T6
**å¼€å‘ç¯å¢ƒ**: STM32CubeIDE + HALåº“
**æœ€åæ›´æ–°**: 2025-11-22

---

## ç›®å½•
- [1. é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
- [2. ç¡¬ä»¶èµ„æºé…ç½®](#2-ç¡¬ä»¶èµ„æºé…ç½®)
- [3. åŸºæœ¬åŠŸèƒ½å¼€å‘è®¡åˆ’](#3-åŸºæœ¬åŠŸèƒ½å¼€å‘è®¡åˆ’)
- [4. è¿›é˜¶åŠŸèƒ½å¼€å‘è®¡åˆ’](#4-è¿›é˜¶åŠŸèƒ½å¼€å‘è®¡åˆ’)
- [5. DeepSeekæ£‹å±€åˆ†æåŠŸèƒ½è®¾è®¡](#5-deepseekæ£‹å±€åˆ†æåŠŸèƒ½è®¾è®¡)
- [6. å¼€å‘é‡Œç¨‹ç¢‘ä¸æ—¶é—´è§„åˆ’](#6-å¼€å‘é‡Œç¨‹ç¢‘ä¸æ—¶é—´è§„åˆ’)
- [7. æµ‹è¯•éªŒè¯è®¡åˆ’](#7-æµ‹è¯•éªŒè¯è®¡åˆ’)
- [8. é£é™©è¯„ä¼°ä¸åº”å¯¹ç­–ç•¥](#8-é£é™©è¯„ä¼°ä¸åº”å¯¹ç­–ç•¥)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®ç›®æ ‡
å¼€å‘åŸºäºSTM32F103C8T6çš„æ™ºèƒ½é»‘ç™½æ£‹æ¸¸æˆç³»ç»Ÿï¼ŒåŒ…å«ï¼š
- **ä¸‹ä½æœº**: STM32å®ç°æ¸¸æˆé€»è¾‘ã€ç¡¬ä»¶æ§åˆ¶ã€ç”¨æˆ·äº¤äº’
- **ä¸Šä½æœº**: PCç«¯æä¾›æ¸¸æˆç•Œé¢ã€æ•°æ®è®°å½•ã€AIåˆ†æ
- **è¿›é˜¶åŠŸèƒ½**: é›†æˆDeepSeek APIè¿›è¡Œæ£‹å±€åˆ†æä¸å¤ç›˜

### 1.2 æŠ€æœ¯æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    UART     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTP API   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   STM32ä¸‹ä½æœº    â”‚ â†--------â†’ â”‚    PCä¸Šä½æœº     â”‚ â†---------â†’ â”‚   DeepSeek AI   â”‚
â”‚                â”‚             â”‚                â”‚              â”‚                â”‚
â”‚ â€¢ æ¸¸æˆé€»è¾‘      â”‚             â”‚ â€¢ æ¸¸æˆç•Œé¢      â”‚              â”‚ â€¢ æ£‹å±€åˆ†æ      â”‚
â”‚ â€¢ é”®ç›˜æ‰«æ      â”‚             â”‚ â€¢ æ•°æ®è®°å½•      â”‚              â”‚ â€¢ ç­–ç•¥å»ºè®®      â”‚
â”‚ â€¢ LEDæ˜¾ç¤º      â”‚             â”‚ â€¢ çŠ¶æ€ç›‘æ§      â”‚              â”‚ â€¢ å¤ç›˜æŠ¥å‘Š      â”‚
â”‚ â€¢ ä¸²å£é€šä¿¡      â”‚             â”‚ â€¢ AIæ¥å£       â”‚              â”‚ â€¢ å¼€å±€åº“        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 å½“å‰çŠ¶æ€åˆ†æ
**å·²å®Œæˆ âœ…**:
- ç¡¬ä»¶å¼•è„šé…ç½® (100%)
- HALåº“é©±åŠ¨é›†æˆ (100%)
- å¤–è®¾åˆå§‹åŒ–é…ç½® (100%)
- é¡¹ç›®å·¥ç¨‹æ¡†æ¶ (100%)

**å¾…å¼€å‘ âŒ**:
- å¤–è®¾é©±åŠ¨å®ç° (0%)
- æ¸¸æˆé€»è¾‘å¼•æ“ (0%)
- ç”¨æˆ·ç•Œé¢çŠ¶æ€æœº (0%)
- é€šä¿¡åè®® (0%)
- AIç®—æ³•å®ç° (0%)

---

## 2. ç¡¬ä»¶èµ„æºé…ç½®

### 2.1 å¼•è„šåˆ†é…è¡¨
| åŠŸèƒ½æ¨¡å— | å¼•è„š | æ ‡ç­¾ | é…ç½®æ¨¡å¼ | çŠ¶æ€ |
|---------|------|------|----------|------|
| **RGB LEDçŸ©é˜µ** | PA0 | LED_DATA | TIM2_CH1 PWM | âœ… å·²é…ç½® |
| **ä¸²å£é€šä¿¡** | PA9 | PC_TX | USART1_TX | âœ… å·²é…ç½® |
| **ä¸²å£é€šä¿¡** | PA10 | PC_RX | USART1_RX | âœ… å·²é…ç½® |
| **é”®ç›˜è¡Œæ‰«æ** | PB12 | KEY_R1 | GPIOè¾“å‡º(é«˜ç”µå¹³) | âœ… å·²é…ç½® |
| **é”®ç›˜è¡Œæ‰«æ** | PB13 | KEY_R2 | GPIOè¾“å‡º(é«˜ç”µå¹³) | âœ… å·²é…ç½® |
| **é”®ç›˜è¡Œæ‰«æ** | PB14 | KEY_R3 | GPIOè¾“å‡º(é«˜ç”µå¹³) | âœ… å·²é…ç½® |
| **é”®ç›˜è¡Œæ‰«æ** | PB15 | KEY_R4 | GPIOè¾“å‡º(é«˜ç”µå¹³) | âœ… å·²é…ç½® |
| **é”®ç›˜åˆ—æ£€æµ‹** | PB5 | KEY_C1 | GPIOè¾“å…¥(ä¸Šæ‹‰) | âœ… å·²é…ç½® |
| **é”®ç›˜åˆ—æ£€æµ‹** | PB6 | KEY_C2 | GPIOè¾“å…¥(ä¸Šæ‹‰) | âœ… å·²é…ç½® |
| **é”®ç›˜åˆ—æ£€æµ‹** | PB7 | KEY_C3 | GPIOè¾“å…¥(ä¸Šæ‹‰) | âœ… å·²é…ç½® |
| **é”®ç›˜åˆ—æ£€æµ‹** | PB8 | KEY_C4 | GPIOè¾“å…¥(ä¸Šæ‹‰) | âœ… å·²é…ç½® |

### 2.2 å…³é”®å¤–è®¾å‚æ•°
**å®šæ—¶å™¨é…ç½® (TIM2)**:
```c
Prescaler: 0
Period: 89
Clock: 72MHz / 90 = 800kHz (WS2812Bè¦æ±‚)
PWM Mode: PWM Generation CH1
DMA: Memory-to-Peripheral, 16ä½å¯¹é½
```

**ä¸²å£é…ç½® (USART1)**:
```c
Baud Rate: 115200
Data Bits: 8
Stop Bits: 1
Parity: None
Flow Control: None
Interrupt: RX Enabled
```

### 2.3 å†…å­˜èµ„æºè§„åˆ’
- **Flashæ€»å®¹é‡**: 64KB
- **HALåº“å ç”¨**: ~29KB
- **åº”ç”¨ä»£ç é¢„ä¼°**: ~30KB
- **å‰©ä½™ç©ºé—´**: ~5KB (ç”¨äºå‚æ•°å­˜å‚¨)

- **RAMæ€»å®¹é‡**: 64KB
- **ç³»ç»Ÿå †æ ˆ**: ~8KB
- **æ¸¸æˆçŠ¶æ€**: ~4KB
- **æ˜¾ç¤ºç¼“å†²**: ~1.5KB (8Ã—8Ã—3å­—èŠ‚RGB)
- **é€šä¿¡ç¼“å†²**: ~2KB
- **å‰©ä½™ç©ºé—´**: ~48.5KB

---

## 3. åŸºæœ¬åŠŸèƒ½å¼€å‘è®¡åˆ’

### 3.1 ç¬¬ä¸€é˜¶æ®µ: ç¡¬ä»¶é©±åŠ¨å±‚ (Week 1)

#### 3.1.1 WS2812B LEDé©±åŠ¨å¼€å‘
**ä»»åŠ¡ç¼–å·**: DEV-01
**ä¼˜å…ˆçº§**: é«˜
**é¢„è®¡å·¥æœŸ**: 2å¤©

**æŠ€æœ¯è¦æ±‚**:
- å®ç°WS2812Bæ—¶åºåè®® (T0: 0.4Âµs, T1: 0.8Âµs)
- DMA + PWMæ–¹å¼é©±åŠ¨64é¢—LED (8Ã—8çŸ©é˜µ)
- æ”¯æŒRGBé¢œè‰²è®¾ç½®ä¸äº®åº¦è°ƒèŠ‚
- å¸§åˆ·æ–°ç‡â‰¥30Hzï¼Œä¿è¯æ˜¾ç¤ºæµç•…

**å…³é”®ä»£ç ç»“æ„**:
```c
// æ–‡ä»¶: Core/Src/ws2812b_driver.c
typedef struct {
    uint8_t red, green, blue;
} RGB_Color_t;

void WS2812B_Init(void);
void WS2812B_SetPixel(uint8_t row, uint8_t col, RGB_Color_t color);
void WS2812B_Clear(void);
void WS2812B_Update(void);
HAL_StatusTypeDef WS2812B_DMA_Complete_Callback(DMA_HandleTypeDef *hdma);
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] èƒ½å¤Ÿç‹¬ç«‹æ§åˆ¶ä»»æ„LEDçš„é¢œè‰²
- [ ] é¢œè‰²æ˜¾ç¤ºå‡†ç¡®(çº¢ç»¿è“åŸºè‰²æµ‹è¯•)
- [ ] æ— é—ªçƒç°è±¡ï¼Œäº®åº¦å‡åŒ€
- [ ] DMAä¼ è¾“ç¨³å®šï¼Œæ— å†…å­˜æº¢å‡º

#### 3.1.2 4Ã—4çŸ©é˜µé”®ç›˜é©±åŠ¨
**ä»»åŠ¡ç¼–å·**: DEV-02
**ä¼˜å…ˆçº§**: é«˜
**é¢„è®¡å·¥æœŸ**: 2å¤©

**æŠ€æœ¯è¦æ±‚**:
- è¡Œæ‰«æå¼é”®ç›˜æ£€æµ‹ç®—æ³•
- ç¡¬ä»¶æ¶ˆæŠ–å¤„ç†(20mså»¶æ—¶)
- æŒ‰é”®çŠ¶æ€æœºè®¾è®¡(æ¾å¼€â†’æŒ‰ä¸‹â†’é•¿æŒ‰)
- æ”¯æŒç»„åˆé”®æ£€æµ‹

**å…³é”®ä»£ç ç»“æ„**:
```c
// æ–‡ä»¶: Core/Src/keypad_driver.c
typedef enum {
    KEY_RELEASED = 0,
    KEY_PRESSED,
    KEY_LONG_PRESSED
} KeyState_t;

typedef struct {
    uint8_t row, col;
    KeyState_t state;
    uint32_t press_time;
} Key_t;

void Keypad_Init(void);
void Keypad_Scan(void);
Key_t Keypad_GetKey(void);
bool Keypad_IsKeyPressed(uint8_t row, uint8_t col);
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ‰€æœ‰16ä¸ªæŒ‰é”®å“åº”æ­£å¸¸
- [ ] æ— è¯¯è§¦å‘ï¼Œæ¶ˆæŠ–ç¨³å®š
- [ ] æ”¯æŒé•¿æŒ‰æ£€æµ‹(>1ç§’)
- [ ] å“åº”æ—¶é—´<50ms

#### 3.1.3 UARTé€šä¿¡åè®®
**ä»»åŠ¡ç¼–å·**: DEV-03
**ä¼˜å…ˆçº§**: ä¸­
**é¢„è®¡å·¥æœŸ**: 1å¤©

**æŠ€æœ¯è¦æ±‚**:
- å®šä¹‰STM32ä¸PCé€šä¿¡åè®®
- ç¯å½¢ç¼“å†²åŒºç®¡ç†æ¥æ”¶æ•°æ®
- æ•°æ®åŒ…å®Œæ•´æ€§æ ¡éªŒ
- å¼‚æ­¥å‘é€é˜Ÿåˆ—ç®¡ç†

**åè®®æ ¼å¼è®¾è®¡**:
```
æ•°æ®åŒ…æ ¼å¼: [STX][CMD][LEN][DATA...][CHK][ETX]
STX: 0x02 (å¼€å§‹æ ‡å¿—)
CMD: å‘½ä»¤å­—èŠ‚
LEN: æ•°æ®é•¿åº¦
DATA: æœ‰æ•ˆè½½è·
CHK: æ ¡éªŒå’Œ(å¼‚æˆ–)
ETX: 0x03 (ç»“æŸæ ‡å¿—)
```

**å…³é”®åŠŸèƒ½**:
```c
// æ–‡ä»¶: Core/Src/uart_protocol.c
void UART_Protocol_Init(void);
HAL_StatusTypeDef UART_Send_Packet(uint8_t cmd, uint8_t* data, uint8_t len);
HAL_StatusTypeDef UART_Receive_Handler(uint8_t byte);
void UART_Process_Command(uint8_t cmd, uint8_t* data, uint8_t len);
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ•°æ®åŒ…å‘é€æˆåŠŸç‡>99%
- [ ] æ¥æ”¶ç¼“å†²åŒºæ— æº¢å‡º
- [ ] æ ¡éªŒé”™è¯¯èƒ½æ­£ç¡®å¤„ç†
- [ ] æ”¯æŒæœ€å¤§256å­—èŠ‚æ•°æ®åŒ…

### 3.2 ç¬¬äºŒé˜¶æ®µ: æ¸¸æˆé€»è¾‘å±‚ (Week 2)

#### 3.2.1 é»‘ç™½æ£‹è§„åˆ™å¼•æ“
**ä»»åŠ¡ç¼–å·**: GAME-01
**ä¼˜å…ˆçº§**: é«˜
**é¢„è®¡å·¥æœŸ**: 3å¤©

**æŠ€æœ¯è¦æ±‚**:
- 8Ã—8æ£‹ç›˜çŠ¶æ€ç®¡ç†
- é»‘ç™½æ£‹è§„åˆ™å®ç°(ç¿»è½¬é€»è¾‘)
- åˆæ³•èµ°æ³•éªŒè¯
- èƒœè´Ÿåˆ¤å®šç®—æ³•

**æ¸¸æˆçŠ¶æ€ç»“æ„**:
```c
// æ–‡ä»¶: Core/Src/othello_engine.c
typedef enum {
    EMPTY = 0,
    BLACK = 1,
    WHITE = 2
} PieceType_t;

typedef struct {
    PieceType_t board[8][8];
    PieceType_t current_player;
    uint8_t black_count;
    uint8_t white_count;
    bool game_over;
    uint32_t move_count;
} GameState_t;

bool Othello_IsValidMove(GameState_t* state, uint8_t row, uint8_t col);
uint8_t Othello_MakeMove(GameState_t* state, uint8_t row, uint8_t col);
bool Othello_IsGameOver(GameState_t* state);
PieceType_t Othello_GetWinner(GameState_t* state);
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] åˆå§‹å¸ƒå±€æ­£ç¡®(ä¸­å¤®2é»‘2ç™½)
- [ ] ç¿»è½¬é€»è¾‘ç¬¦åˆé»‘ç™½æ£‹è§„åˆ™
- [ ] æ— åˆæ³•èµ°æ³•æ—¶è‡ªåŠ¨è·³è¿‡
- [ ] æ¸¸æˆç»“æŸåˆ¤å®šå‡†ç¡®

#### 3.2.2 åŸºç¡€AIç®—æ³•å®ç°
**ä»»åŠ¡ç¼–å·**: GAME-02
**ä¼˜å…ˆçº§**: ä¸­
**é¢„è®¡å·¥æœŸ**: 2å¤©

**æŠ€æœ¯è¦æ±‚**:
- Minimaxç®—æ³•å®ç°(æ·±åº¦é™åˆ¶3-4å±‚)
- å¯å‘å¼è¯„ä¼°å‡½æ•°è®¾è®¡
- Alpha-Betaå‰ªæä¼˜åŒ–
- å¤šéš¾åº¦ç­‰çº§æ”¯æŒ

**AIç®—æ³•ç»“æ„**:
```c
// æ–‡ä»¶: Core/Src/othello_ai.c
typedef struct {
    int16_t score;
    uint8_t row, col;
} Move_t;

typedef enum {
    AI_EASY = 1,    // æ·±åº¦2
    AI_MEDIUM = 2,  // æ·±åº¦3
    AI_HARD = 3     // æ·±åº¦4
} AI_Difficulty_t;

Move_t AI_GetBestMove(GameState_t* state, AI_Difficulty_t difficulty);
int16_t AI_Evaluate_Board(GameState_t* state, PieceType_t player);
int16_t AI_Minimax(GameState_t* state, uint8_t depth, bool maximizing, int16_t alpha, int16_t beta);
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] AIèƒ½é€‰æ‹©åˆç†èµ°æ³•
- [ ] ä¸åŒéš¾åº¦æœ‰æ˜æ˜¾å·®å¼‚
- [ ] è®¡ç®—æ—¶é—´<2ç§’
- [ ] å†…å­˜ä½¿ç”¨<4KB

### 3.3 ç¬¬ä¸‰é˜¶æ®µ: ç”¨æˆ·ç•Œé¢å±‚ (Week 2-3)

#### 3.3.0 è¿ªç‰¹æ‹‰å§†æ–¯è®¾è®¡ç†å¿µæŒ‡å¯¼
**è®¾è®¡å“²å­¦**: éµå¾ªè¿ªç‰¹æ‹‰å§†æ–¯"Less but better"çš„è®¾è®¡ç†å¿µï¼Œæ‰“é€ åŠŸèƒ½è‡³ä¸Šã€ç®€çº¦æ°¸æ’çš„æ¸¸æˆç•Œé¢

**è®¾è®¡åè¯«åº”ç”¨**:
1. **åˆ›æ–°æ€§**: åœ¨8Ã—8 LEDçŸ©é˜µçš„é™åˆ¶ä¸‹åˆ›é€ ç›´è§‚çš„æ¸¸æˆä½“éªŒ
2. **å®ç”¨æ€§**: æ¯ä¸ªè§†è§‰å…ƒç´ éƒ½æœåŠ¡äºæ˜ç¡®çš„åŠŸèƒ½ç›®çš„
3. **ç¾å­¦æ€§**: è¿½æ±‚ç®€æ´çš„è§†è§‰ç¾æ„Ÿï¼Œé¿å…è£…é¥°æ€§å…ƒç´ 
4. **æ˜“æ‡‚æ€§**: æ— éœ€è¯´æ˜ä¹¦å³å¯ç†è§£ç•Œé¢å«ä¹‰
5. **è°¦é€Šæ€§**: ç•Œé¢ä¸æŠ¢å¤ºæ¸¸æˆå†…å®¹çš„ä¸»ä½“åœ°ä½
6. **è¯šå®æ€§**: çœŸå®åæ˜ æ¸¸æˆçŠ¶æ€ï¼Œæ— è¯¯å¯¼æ€§è§†è§‰
7. **æŒä¹…æ€§**: é¿å…æ½®æµåŒ–è®¾è®¡ï¼Œé€‰æ‹©ç»å…¸é…è‰²æ–¹æ¡ˆ
8. **ç²¾è‡´æ€§**: æ¯ä¸ªåƒç´ çš„é¢œè‰²é€‰æ‹©éƒ½ç»è¿‡æ·±æ€ç†Ÿè™‘
9. **ç¯ä¿æ€§**: ä¼˜åŒ–äº®åº¦è®¾ç½®ï¼Œé™ä½åŠŸè€—å’Œå…‰æ±¡æŸ“
10. **æç®€æ€§**: å°½å¯èƒ½å°‘çš„è§†è§‰å…ƒç´ ä¼ è¾¾æœ€å¤šçš„ä¿¡æ¯

**è¿ªç‰¹æ‹‰å§†æ–¯ç»å…¸é…è‰²ä½“ç³»**:
```c
// æ ¸å¿ƒé…è‰²å®šä¹‰ (RGB565æ ¼å¼ï¼Œé€‚é…WS2812B)
#define DIETER_WHITE        {255, 255, 255}  // çº¯ç™½è‰² - ç™½æ£‹å­
#define DIETER_BLACK        {0,   0,   0}    // çº¯é»‘è‰² - é»‘æ£‹å­
#define DIETER_GRAY_DARK    {51,  51,  51}   // æ·±ç°è‰² - æ£‹ç›˜ç½‘æ ¼
#define DIETER_GRAY_MID     {128, 128, 128}  // ä¸­ç°è‰² - éæ´»è·ƒåŒºåŸŸ
#define DIETER_GRAY_LIGHT   {245, 245, 245}  // æµ…ç°è‰² - èƒŒæ™¯æç¤º
#define BRAUN_ORANGE        {255, 102, 0}    // åšæœ—æ©™ - äº¤äº’æç¤º
#define FUNCTION_RED        {255, 0,   0}    // åŠŸèƒ½çº¢ - é”™è¯¯/è­¦å‘Š
```

**è§†è§‰å±‚çº§åŸåˆ™**:
- **ä¸»è¦ä¿¡æ¯**: é«˜å¯¹æ¯”åº¦è¡¨è¾¾ (çº¯é»‘/çº¯ç™½æ£‹å­)
- **æ¬¡è¦ä¿¡æ¯**: ä¸­ç­‰å¯¹æ¯”åº¦ (æ·±ç°ç½‘æ ¼çº¿)
- **è¾…åŠ©ä¿¡æ¯**: ä½å¯¹æ¯”åº¦ (æµ…ç°èƒŒæ™¯æç¤º)
- **äº¤äº’åé¦ˆ**: åšæœ—æ©™è‰²å¼ºè°ƒ (å¯è½å­ä½ç½®)
- **ç³»ç»ŸçŠ¶æ€**: åŠŸèƒ½çº¢è‰²è­¦ç¤º (é”™è¯¯çŠ¶æ€)

#### 3.3.1 æ¸¸æˆUIçŠ¶æ€æœº
**ä»»åŠ¡ç¼–å·**: UI-01
**ä¼˜å…ˆçº§**: ä¸­
**é¢„è®¡å·¥æœŸ**: 2å¤©

**è¿ªç‰¹æ‹‰å§†æ–¯è®¾è®¡åŸåˆ™**:
- **çŠ¶æ€è½¬æ¢**: ç®€æ´ç›´è§‚ï¼Œæ— å¤šä½™è¿‡æ¸¡æ•ˆæœ
- **ä¿¡æ¯ä¼ è¾¾**: æ¯ä¸ªçŠ¶æ€ç”¨æœ€å°‘è§†è§‰å…ƒç´ è¡¨è¾¾æœ€æ¸…æ™°å«ä¹‰
- **ç”¨æˆ·å¼•å¯¼**: é€šè¿‡åŠŸèƒ½æ€§è®¾è®¡è€Œéè£…é¥°æ€§æç¤ºå¼•å¯¼ç”¨æˆ·

**çŠ¶æ€å®šä¹‰**:
```c
// æ–‡ä»¶: Core/Src/game_ui.c
typedef enum {
    UI_MENU,        // ä¸»èœå• - æç®€é€‰é¡¹æ˜¾ç¤º
    UI_GAME_SETUP,  // æ¸¸æˆè®¾ç½® - åŠŸèƒ½æ€§å‚æ•°é…ç½®
    UI_PLAYING,     // æ¸¸æˆè¿›è¡Œä¸­ - çº¯ç²¹æ¸¸æˆçŠ¶æ€
    UI_PAUSE,       // æš‚åœ - æœ€å°åŒ–è§†è§‰å¹²æ‰°
    UI_GAME_OVER,   // æ¸¸æˆç»“æŸ - è¯šå®çš„ç»“æœå±•ç¤º
    UI_SETTINGS     // ç³»ç»Ÿè®¾ç½® - å®ç”¨æ€§é…ç½®ç•Œé¢
} UI_State_t;

typedef struct {
    UI_State_t current_state;
    uint32_t state_timer;
    bool display_update_needed;
    uint8_t brightness_level;     // è¿ªç‰¹æ‹‰å§†æ–¯ç¯ä¿ç†å¿µï¼šäº®åº¦è‡ªé€‚åº”
    bool minimal_mode;            // æç®€æ¨¡å¼å¼€å…³
} UI_Context_t;

// è¿ªç‰¹æ‹‰å§†æ–¯è®¾è®¡å‡½æ•°æ¥å£
void UI_Init(void);
void UI_Update(void);
void UI_Handle_Input(Key_t key);
void UI_Display_Refresh(void);
void UI_Set_Minimal_Mode(bool enabled);          // æç®€æ¨¡å¼åˆ‡æ¢
void UI_Adjust_Brightness(uint8_t level);       // äº®åº¦ä¼˜åŒ–
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] çŠ¶æ€åˆ‡æ¢æç®€æµç•…ï¼Œæ— è£…é¥°æ€§åŠ¨ç”»
- [ ] èœå•å¯¼èˆªç¬¦åˆ"æ˜“æ‡‚æ€§"åŸåˆ™ï¼Œæ— éœ€å­¦ä¹ 
- [ ] æŒ‰é”®å“åº”åŠæ—¶ï¼Œæ»¡è¶³"å®ç”¨æ€§"è¦æ±‚
- [ ] æ˜¾ç¤ºä¿¡æ¯å®Œæ•´å‡†ç¡®ï¼Œä½“ç°"è¯šå®æ€§"
- [ ] æ”¯æŒäº®åº¦è°ƒèŠ‚ï¼Œå®ç°"ç¯ä¿æ€§"ç›®æ ‡

#### 3.3.2 LEDæ˜¾ç¤ºæ¸²æŸ“ç³»ç»Ÿ
**ä»»åŠ¡ç¼–å·**: UI-02
**ä¼˜å…ˆçº§**: é«˜
**é¢„è®¡å·¥æœŸ**: 2å¤©

**è¿ªç‰¹æ‹‰å§†æ–¯è®¾è®¡ç†å¿µåº”ç”¨**:
- **"Less but better"**: å»é™¤ä¸€åˆ‡è£…é¥°æ€§è§†è§‰æ•ˆæœï¼Œä¸“æ³¨åŠŸèƒ½ä¼ è¾¾
- **æ°¸æ’æ€§è®¾è®¡**: é€‰æ‹©ç»å…¸çš„é»‘ç™½ç°é…è‰²ï¼Œé¿å…æµè¡Œè‰²å½©
- **åŠŸèƒ½è¯šå®æ€§**: æ¯ç§é¢œè‰²éƒ½æœ‰æ˜ç¡®çš„ä¿¡æ¯ä¼ è¾¾ç›®çš„
- **ç¯ä¿æ„è¯†**: ä¼˜åŒ–LEDäº®åº¦ï¼Œé™ä½åŠŸè€—å’Œå…‰æ±¡æŸ“

**æŠ€æœ¯è¦æ±‚**:
- æ£‹ç›˜çŠ¶æ€åˆ°LEDæ˜ å°„ (è¿ªç‰¹æ‹‰å§†æ–¯ç²¾ç®€åŒ–åŸåˆ™)
- æç®€åŠ¨ç”»æ•ˆæœ (ä»…åŠŸèƒ½æ€§æç¤ºï¼Œæ— è£…é¥°åŠ¨ç”»)
- çŠ¶æ€æŒ‡ç¤ºç³»ç»Ÿ (åšæœ—ç»å…¸è®¾è®¡è¯­è¨€)
- æ™ºèƒ½äº®åº¦æ§åˆ¶ (ç¯ä¿èŠ‚èƒ½ç†å¿µ)

**æ˜¾ç¤ºç³»ç»Ÿç»“æ„**:
```c
// æ–‡ä»¶: Core/Src/display_renderer.c
// è¿ªç‰¹æ‹‰å§†æ–¯é…è‰²å¸¸é‡å®šä¹‰
extern const RGB_Color_t DIETER_COLORS[];

void Display_Init(void);
void Display_Clear(void);
void Display_Draw_Board_Minimal(GameState_t* state);        // æç®€æ£‹ç›˜æ˜¾ç¤º
void Display_Highlight_ValidMoves_Subtle(GameState_t* state); // ä½è°ƒçš„å¯è½å­æç¤º
void Display_Show_Move_Feedback(uint8_t row, uint8_t col);   // ç®€æ´çš„è½å­ç¡®è®¤
void Display_Show_GameOver_Honest(PieceType_t winner);       // è¯šå®çš„æ¸¸æˆç»“æŸæ˜¾ç¤º
void Display_Set_Brightness(uint8_t level);                 // äº®åº¦æ§åˆ¶
void Display_Toggle_Grid(bool show_grid);                   // ç½‘æ ¼çº¿æ˜¾ç¤ºåˆ‡æ¢
```

**è¿ªç‰¹æ‹‰å§†æ–¯é…è‰²æ–¹æ¡ˆ** (å®Œå…¨é‡æ–°è®¾è®¡):
```c
// æ ¸å¿ƒæ¸¸æˆå…ƒç´ é…è‰²
typedef struct {
    RGB_Color_t black_piece;      // {0, 0, 0} - çº¯é»‘æ£‹å­
    RGB_Color_t white_piece;      // {255, 255, 255} - çº¯ç™½æ£‹å­
    RGB_Color_t board_grid;       // {51, 51, 51} - æ·±ç°ç½‘æ ¼çº¿
    RGB_Color_t valid_move;       // {255, 102, 0} - åšæœ—æ©™å¯è½å­æç¤º
    RGB_Color_t current_player;   // {128, 128, 128} - ä¸­ç°ç©å®¶æŒ‡ç¤º
    RGB_Color_t error_state;      // {255, 0, 0} - åŠŸèƒ½çº¢é”™è¯¯æç¤º
    RGB_Color_t background;       // {0, 0, 0} - çº¯é»‘èƒŒæ™¯
    RGB_Color_t system_info;      // {245, 245, 245} - æµ…ç°ç³»ç»Ÿä¿¡æ¯
} Dieter_ColorScheme_t;

// è§†è§‰å±‚çº§å®šä¹‰
typedef enum {
    VISUAL_PRIMARY,    // ä¸»è¦ä¿¡æ¯ï¼šæ£‹å­ (é«˜å¯¹æ¯”åº¦)
    VISUAL_SECONDARY,  // æ¬¡è¦ä¿¡æ¯ï¼šç½‘æ ¼ (ä¸­å¯¹æ¯”åº¦)
    VISUAL_TERTIARY,   // è¾…åŠ©ä¿¡æ¯ï¼šæç¤º (ä½å¯¹æ¯”åº¦)
    VISUAL_ACCENT      // å¼ºè°ƒä¿¡æ¯ï¼šäº¤äº’åé¦ˆ (åšæœ—æ©™)
} Visual_Hierarchy_t;
```

**åŠŸèƒ½æ€§æ˜¾ç¤ºæ¨¡å¼**:
1. **æ¸¸æˆæ¨¡å¼**: ä»…æ˜¾ç¤ºæ£‹ç›˜å’Œæ£‹å­ï¼Œæ— å¤šä½™å…ƒç´ 
2. **æç¤ºæ¨¡å¼**: åšæœ—æ©™è‰²ä½äº®åº¦é—ªçƒæ ‡ç¤ºå¯è½å­ä½ç½®
3. **çŠ¶æ€æ¨¡å¼**: è¾¹è§’LEDä½œä¸ºç®€æ´çš„ç³»ç»ŸçŠ¶æ€æŒ‡ç¤º
4. **æç®€æ¨¡å¼**: å…³é—­æ‰€æœ‰éå¿…éœ€è§†è§‰å…ƒç´ ï¼Œçº¯ç²¹é»‘ç™½æ˜¾ç¤º

**ç¯ä¿ä¼˜åŒ–ç‰¹æ€§**:
- è‡ªé€‚åº”äº®åº¦è°ƒèŠ‚ (æ ¹æ®ç¯å¢ƒå…‰çº¿)
- èŠ‚èƒ½æ¨¡å¼ (é™ä½éæ´»è·ƒåŒºåŸŸäº®åº¦)
- æ— é¢‘é—ªè®¾è®¡ (ä¿æŠ¤ç”¨æˆ·è§†åŠ›)

**éªŒæ”¶æ ‡å‡†** (è¿ªç‰¹æ‹‰å§†æ–¯è´¨é‡æ ‡å‡†):
- [ ] æ£‹ç›˜æ˜¾ç¤ºç¬¦åˆ"è¯šå®æ€§"ï¼Œå‡†ç¡®åæ˜ æ¸¸æˆçŠ¶æ€
- [ ] é…è‰²æ–¹æ¡ˆä½“ç°"æŒä¹…æ€§"ï¼Œæ— æµè¡Œå…ƒç´ 
- [ ] è§†è§‰å±‚çº§éµå¾ª"æ˜“æ‡‚æ€§"ï¼Œä¿¡æ¯ä¼ è¾¾æ¸…æ™°
- [ ] åŠ¨ç”»æ•ˆæœæ»¡è¶³"è°¦é€Šæ€§"ï¼Œä¸å¹²æ‰°ä¸»ä½“å†…å®¹
- [ ] äº®åº¦æ§åˆ¶å®ç°"ç¯ä¿æ€§"ï¼Œä¼˜åŒ–åŠŸè€—
- [ ] æ•´ä½“è®¾è®¡è¾¾åˆ°"æç®€æ€§"ï¼Œæ— å†—ä½™è§†è§‰å…ƒç´ 

---

## 4. è¿›é˜¶åŠŸèƒ½å¼€å‘è®¡åˆ’

### 4.1 ç¬¬å››é˜¶æ®µ: é«˜çº§æ¸¸æˆåŠŸèƒ½ (Week 3-4)

#### 4.1.1 æ¸¸æˆæ¨¡å¼æ‰©å±•
**ä»»åŠ¡ç¼–å·**: ADV-01
**ä¼˜å…ˆçº§**: ä¸­
**é¢„è®¡å·¥æœŸ**: 2å¤©

**åŠŸèƒ½æ¸…å•**:
- **äººæœºå¯¹æˆ˜æ¨¡å¼**: ç©å®¶ vs AI (3ä¸ªéš¾åº¦ç­‰çº§)
- **åŒäººå¯¹æˆ˜æ¨¡å¼**: ç©å®¶1 vs ç©å®¶2
- **è§‚å¯Ÿæ¨¡å¼**: AI vs AI (å­¦ä¹ ç”¨)
- **æŒ‘æˆ˜æ¨¡å¼**: ç‰¹å®šå±€é¢æ±‚è§£

**æ¨¡å¼ç®¡ç†**:
```c
// æ–‡ä»¶: Core/Src/game_modes.c
typedef enum {
    MODE_PVE_EASY,
    MODE_PVE_MEDIUM,
    MODE_PVE_HARD,
    MODE_PVP,
    MODE_AI_VS_AI,
    MODE_PUZZLE
} GameMode_t;

typedef struct {
    GameMode_t mode;
    uint32_t time_limit;      // ç§’
    bool hint_enabled;
    bool undo_enabled;
} GameConfig_t;
```

#### 4.1.2 è®¡åˆ†ä¸ç»Ÿè®¡ç³»ç»Ÿ
**ä»»åŠ¡ç¼–å·**: ADV-02
**ä¼˜å…ˆçº§**: ä½
**é¢„è®¡å·¥æœŸ**: 1å¤©

**åŠŸèƒ½éœ€æ±‚**:
- å®æ—¶åˆ†æ•°æ˜¾ç¤º
- èƒœè´Ÿç»Ÿè®¡è®°å½•
- æ¸¸æˆæ—¶é•¿ç»Ÿè®¡
- æœ€é«˜åˆ†è®°å½•(å‰5å)

**ç»Ÿè®¡ç»“æ„**:
```c
// æ–‡ä»¶: Core/Src/game_statistics.c
typedef struct {
    uint32_t games_played;
    uint32_t games_won;
    uint32_t games_lost;
    uint32_t total_time;      // ç§’
    uint8_t highest_score;
    char player_name[16];
} PlayerStats_t;

typedef struct {
    PlayerStats_t leaderboard[5];
    uint8_t entries_count;
} Leaderboard_t;
```

#### 4.1.3 æ¸¸æˆå›æ”¾åŠŸèƒ½
**ä»»åŠ¡ç¼–å·**: ADV-03
**ä¼˜å…ˆçº§**: ä¸­
**é¢„è®¡å·¥æœŸ**: 2å¤©

**æŠ€æœ¯è¦æ±‚**:
- èµ°æ³•è®°å½•ä¸å­˜å‚¨
- æ£‹è°±å›æ”¾æ’­æ”¾
- å‰è¿›/åé€€æ§åˆ¶
- å…³é”®å±€é¢æ ‡è®°

**å›æ”¾ç³»ç»Ÿ**:
```c
// æ–‡ä»¶: Core/Src/game_replay.c
typedef struct {
    uint8_t row, col;
    PieceType_t player;
    uint32_t timestamp;
    uint8_t captured_count;
} Move_Record_t;

typedef struct {
    Move_Record_t moves[60];  // æœ€å¤š60æ‰‹
    uint8_t move_count;
    uint8_t current_move;
    GameState_t initial_state;
} GameReplay_t;

void Replay_Init(GameReplay_t* replay);
void Replay_AddMove(GameReplay_t* replay, uint8_t row, uint8_t col, PieceType_t player);
bool Replay_StepForward(GameReplay_t* replay, GameState_t* state);
bool Replay_StepBackward(GameReplay_t* replay, GameState_t* state);
```

### 4.2 ç¬¬äº”é˜¶æ®µ: é€šä¿¡åè®®å®Œå–„ (Week 4)

#### 4.2.1 å®Œæ•´é€šä¿¡åè®®å®ç°
**ä»»åŠ¡ç¼–å·**: COMM-01
**ä¼˜å…ˆçº§**: é«˜
**é¢„è®¡å·¥æœŸ**: 2å¤©

**åè®®å‘½ä»¤é›†**:
```c
// å‘½ä»¤å®šä¹‰
#define CMD_BOARD_STATE     0x01  // å‘é€æ£‹ç›˜çŠ¶æ€
#define CMD_MAKE_MOVE      0x02  // æ¥æ”¶èµ°æ³•æŒ‡ä»¤
#define CMD_GAME_CONFIG    0x03  // æ¸¸æˆé…ç½®
#define CMD_GAME_STATS     0x04  // ç»Ÿè®¡ä¿¡æ¯
#define CMD_SYSTEM_INFO    0x05  // ç³»ç»Ÿä¿¡æ¯
#define CMD_AI_REQUEST     0x06  // AIåˆ†æè¯·æ±‚
#define CMD_ERROR          0xFF  // é”™è¯¯å“åº”

// æ•°æ®åŒ…ç»“æ„ç¤ºä¾‹
typedef struct {
    uint8_t cmd;
    uint8_t seq;              // åºåˆ—å·
    uint16_t timestamp;       // æ—¶é—´æˆ³
    union {
        GameState_t board;
        Move_Record_t move;
        GameConfig_t config;
        PlayerStats_t stats;
    } payload;
} Protocol_Packet_t;
```

#### 4.2.2 é”™è¯¯å¤„ç†ä¸é‡ä¼ æœºåˆ¶
**ä»»åŠ¡ç¼–å·**: COMM-02
**ä¼˜å…ˆçº§**: ä¸­
**é¢„è®¡å·¥æœŸ**: 1å¤©

**å¯é æ€§ä¿è¯**:
- æ•°æ®åŒ…åºåˆ—å·ç®¡ç†
- è¶…æ—¶é‡ä¼ æœºåˆ¶(3æ¬¡é‡è¯•)
- CRCæ ¡éªŒå¢å¼º
- è¿æ¥çŠ¶æ€ç›‘æ§

---

## 5. DeepSeekæ£‹å±€åˆ†æåŠŸèƒ½è®¾è®¡

### 5.1 ç³»ç»Ÿæ¶æ„è®¾è®¡

#### 5.1.1 æ•´ä½“æ•°æ®æµ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    æ£‹å±€æ•°æ®    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    HTTPè¯·æ±‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   STM32è®¾å¤‡     â”‚ â•â•â•â•â•â•â•â•â•â•â•â–º â”‚   PCä¸Šä½æœº      â”‚ â•â•â•â•â•â•â•â•â•â•â•â–º â”‚   DeepSeek API  â”‚
â”‚                â”‚              â”‚                â”‚              â”‚                â”‚
â”‚ â€¢ èµ°æ³•è®°å½•      â”‚              â”‚ â€¢ æ•°æ®æ•´ç†      â”‚              â”‚ â€¢ æ£‹å±€åˆ†æ      â”‚
â”‚ â€¢ æ¸¸æˆçŠ¶æ€      â”‚              â”‚ â€¢ APIè°ƒç”¨       â”‚              â”‚ â€¢ ç­–ç•¥è¯„ä¼°      â”‚
â”‚ â€¢ æ—¶é—´è®°å½•      â”‚              â”‚ â€¢ ç»“æœè§£æ      â”‚              â”‚ â€¢ æ”¹è¿›å»ºè®®      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚                               â”‚
                                         â–¼                               â–¼
                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚   åˆ†ææŠ¥å‘Š      â”‚              â”‚   ç»“æ„åŒ–å›å¤    â”‚
                                 â”‚                â”‚              â”‚                â”‚
                                 â”‚ â€¢ å¼€å±€è¯„ä»·      â”‚              â”‚ â€¢ JSONæ ¼å¼      â”‚
                                 â”‚ â€¢ ä¸­ç›˜åˆ†æ      â”‚â—„â•â•â•â•â•â•â•â•â•â•â•â•â•â”‚ â€¢ è¯„åˆ†ç³»ç»Ÿ      â”‚
                                 â”‚ â€¢ å¤±è¯¯æ ‡è®°      â”‚              â”‚ â€¢ æ¨èèµ°æ³•      â”‚
                                 â”‚ â€¢ å­¦ä¹ å»ºè®®      â”‚              â”‚ â€¢ éš¾åº¦è¯„ä¼°      â”‚
                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 PCä¸Šä½æœºè½¯ä»¶è®¾è®¡

#### 5.2.1 åº”ç”¨ç¨‹åºæ¶æ„
**å¼€å‘è¯­è¨€**: Python 3.8+
**ä¸»è¦åº“ä¾èµ–**:
- `pyserial` - ä¸²å£é€šä¿¡
- `requests` - HTTP APIè°ƒç”¨
- `tkinter` - GUIç•Œé¢
- `json` - æ•°æ®è§£æ
- `datetime` - æ—¶é—´å¤„ç†
- `threading` - å¤šçº¿ç¨‹ç®¡ç†

**ç›®å½•ç»“æ„**:
```
OthelloPC/
â”œâ”€â”€ main.py                 # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ communication/
â”‚   â”œâ”€â”€ serial_handler.py   # ä¸²å£é€šä¿¡ç®¡ç†
â”‚   â””â”€â”€ protocol_parser.py  # åè®®è§£æå™¨
â”œâ”€â”€ ai_analysis/
â”‚   â”œâ”€â”€ deepseek_client.py  # DeepSeek APIå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ game_analyzer.py    # æ£‹å±€åˆ†æå™¨
â”‚   â””â”€â”€ report_generator.py # åˆ†ææŠ¥å‘Šç”Ÿæˆ
â”œâ”€â”€ gui/
â”‚   â”œâ”€â”€ main_window.py      # ä¸»çª—å£ç•Œé¢
â”‚   â”œâ”€â”€ game_board.py       # æ£‹ç›˜æ˜¾ç¤ºç»„ä»¶
â”‚   â””â”€â”€ analysis_panel.py   # åˆ†æç»“æœé¢æ¿
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ game_database.py    # æ¸¸æˆæ•°æ®å­˜å‚¨
â”‚   â””â”€â”€ config.py           # é…ç½®æ–‡ä»¶ç®¡ç†
â””â”€â”€ utils/
    â”œâ”€â”€ logger.py           # æ—¥å¿—ç³»ç»Ÿ
    â””â”€â”€ file_manager.py     # æ–‡ä»¶æ“ä½œå·¥å…·
```

#### 5.2.2 DeepSeek APIå®¢æˆ·ç«¯å®ç°
**ä»»åŠ¡ç¼–å·**: AI-01
**ä¼˜å…ˆçº§**: é«˜
**é¢„è®¡å·¥æœŸ**: 2å¤©

```python
# æ–‡ä»¶: ai_analysis/deepseek_client.py
import requests
import json
from typing import Dict, List, Optional
from dataclasses import dataclass

@dataclass
class MoveAnalysis:
    """å•æ­¥èµ°æ³•åˆ†æç»“æœ"""
    move_notation: str      # èµ°æ³•è®°è°± (å¦‚ "D3")
    evaluation_score: float # è¯„åˆ† (-1.0 åˆ° 1.0)
    move_quality: str       # èµ°æ³•è´¨é‡ ("excellent", "good", "inaccurate", "mistake", "blunder")
    alternative_moves: List[str]  # æ›´å¥½çš„é€‰æ‹©
    explanation: str        # åˆ†æè§£é‡Š

@dataclass
class GameAnalysis:
    """å®Œæ•´æ£‹å±€åˆ†æç»“æœ"""
    game_id: str
    opening_evaluation: str  # å¼€å±€è¯„ä»·
    middle_game_analysis: str # ä¸­å±€åˆ†æ
    endgame_assessment: str  # ç»ˆå±€è¯„ä¼°
    key_moments: List[int]   # å…³é”®å›åˆ
    move_analyses: List[MoveAnalysis]  # é€æ­¥åˆ†æ
    overall_rating: float    # æ•´ä½“è¡¨ç°è¯„åˆ†
    improvement_suggestions: List[str]  # æ”¹è¿›å»ºè®®

class DeepSeekClient:
    def __init__(self, api_key: str, base_url: str = "https://api.deepseek.com"):
        self.api_key = api_key
        self.base_url = base_url
        self.session = requests.Session()
        self.session.headers.update({
            "Authorization": f"Bearer {api_key}",
            "Content-Type": "application/json"
        })

    def analyze_game(self, game_data: Dict) -> GameAnalysis:
        """åˆ†æå®Œæ•´æ£‹å±€"""
        prompt = self._build_analysis_prompt(game_data)

        response = self.session.post(
            f"{self.base_url}/chat/completions",
            json={
                "model": "deepseek-chat",
                "messages": [
                    {"role": "system", "content": self._get_system_prompt()},
                    {"role": "user", "content": prompt}
                ],
                "max_tokens": 2000,
                "temperature": 0.3
            }
        )

        if response.status_code == 200:
            return self._parse_analysis_response(response.json())
        else:
            raise Exception(f"APIè°ƒç”¨å¤±è´¥: {response.status_code} - {response.text}")

    def _get_system_prompt(self) -> str:
        """è·å–ç³»ç»Ÿæç¤ºè¯"""
        return """ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„é»‘ç™½æ£‹(Othello/Reversi)åˆ†æå¸ˆã€‚è¯·åˆ†ææä¾›çš„æ£‹å±€ï¼Œç»™å‡ºè¯¦ç»†çš„è¯„ä»·å’Œå»ºè®®ã€‚

åˆ†æè¦æ±‚ï¼š
1. å¼€å±€åˆ†æï¼šè¯„ä»·å¼€å±€é€‰æ‹©ï¼Œæ˜¯å¦ç¬¦åˆç»å…¸å¼€å±€ç†è®º
2. ä¸­ç›˜åˆ†æï¼šåˆ†æåŒæ–¹çš„ç­–ç•¥æ‰§è¡Œï¼Œå…³é”®å›åˆçš„å¾—å¤±
3. ç»ˆå±€åˆ†æï¼šè¯„ä»·åŒæ–¹åœ¨ç»ˆå±€é˜¶æ®µçš„è¡¨ç°
4. é€æ­¥èµ°æ³•åˆ†æï¼šå¯¹æ¯ä¸€æ­¥ç»™å‡ºè¯„åˆ†å’Œç®€çŸ­è¯„ä»·
5. æ”¹è¿›å»ºè®®ï¼šé’ˆå¯¹æ€§çš„å­¦ä¹ å»ºè®®

è¯·ä»¥JSONæ ¼å¼è¿”å›ç»“æœï¼ŒåŒ…å«ä»¥ä¸Šæ‰€æœ‰åˆ†æå†…å®¹ã€‚"""

    def _build_analysis_prompt(self, game_data: Dict) -> str:
        """æ„å»ºåˆ†ææç¤ºè¯"""
        board_history = game_data.get('board_states', [])
        moves_history = game_data.get('moves', [])
        game_info = game_data.get('info', {})

        prompt = f"""è¯·åˆ†æä»¥ä¸‹é»‘ç™½æ£‹æ£‹å±€ï¼š

æ¸¸æˆä¿¡æ¯ï¼š
- æ¸¸æˆæ¨¡å¼ï¼š{game_info.get('mode', 'æœªçŸ¥')}
- æ¸¸æˆæ—¶é•¿ï¼š{game_info.get('duration', 'æœªçŸ¥')}ç§’
- æœ€ç»ˆæ¯”åˆ†ï¼šé»‘å­ {game_info.get('black_score', 0)} - ç™½å­ {game_info.get('white_score', 0)}
- è·èƒœæ–¹ï¼š{game_info.get('winner', 'æœªçŸ¥')}

èµ°æ³•åºåˆ—ï¼š
"""

        for i, move in enumerate(moves_history):
            move_player = "é»‘å­" if move['player'] == 1 else "ç™½å­"
            prompt += f"{i+1}. {move_player} {chr(ord('A') + move['col'])}{move['row'] + 1}\n"

        prompt += "\nè¯·æä¾›è¯¦ç»†çš„æ£‹å±€åˆ†æã€‚"
        return prompt

    def _parse_analysis_response(self, response_data: Dict) -> GameAnalysis:
        """è§£æAPIå“åº”"""
        try:
            content = response_data['choices'][0]['message']['content']
            analysis_json = json.loads(content)

            # è§£æèµ°æ³•åˆ†æ
            move_analyses = []
            for move_data in analysis_json.get('move_analyses', []):
                move_analyses.append(MoveAnalysis(
                    move_notation=move_data.get('notation', ''),
                    evaluation_score=move_data.get('score', 0.0),
                    move_quality=move_data.get('quality', 'unknown'),
                    alternative_moves=move_data.get('alternatives', []),
                    explanation=move_data.get('explanation', '')
                ))

            return GameAnalysis(
                game_id=analysis_json.get('game_id', ''),
                opening_evaluation=analysis_json.get('opening_evaluation', ''),
                middle_game_analysis=analysis_json.get('middle_game_analysis', ''),
                endgame_assessment=analysis_json.get('endgame_assessment', ''),
                key_moments=analysis_json.get('key_moments', []),
                move_analyses=move_analyses,
                overall_rating=analysis_json.get('overall_rating', 0.0),
                improvement_suggestions=analysis_json.get('improvement_suggestions', [])
            )
        except (json.JSONDecodeError, KeyError) as e:
            raise Exception(f"åˆ†æç»“æœè§£æå¤±è´¥: {e}")
```

#### 5.2.3 æ¸¸æˆæ•°æ®æ”¶é›†å™¨
**ä»»åŠ¡ç¼–å·**: AI-02
**ä¼˜å…ˆçº§**: é«˜
**é¢„è®¡å·¥æœŸ**: 1å¤©

```python
# æ–‡ä»¶: data/game_database.py
import sqlite3
import json
import datetime
from typing import List, Dict, Optional

class GameDatabase:
    def __init__(self, db_path: str = "othello_games.db"):
        self.db_path = db_path
        self._init_database()

    def _init_database(self):
        """åˆå§‹åŒ–æ•°æ®åº“è¡¨ç»“æ„"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()

        # æ¸¸æˆè®°å½•è¡¨
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS games (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                timestamp TEXT NOT NULL,
                mode TEXT NOT NULL,
                duration INTEGER,
                black_score INTEGER,
                white_score INTEGER,
                winner TEXT,
                moves_data TEXT,
                board_states TEXT,
                analyzed BOOLEAN DEFAULT FALSE,
                analysis_data TEXT
            )
        ''')

        # åˆ†æç»“æœè¡¨
        cursor.execute('''
            CREATE TABLE IF NOT EXISTS analyses (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                game_id INTEGER,
                analysis_timestamp TEXT,
                opening_score REAL,
                middle_game_score REAL,
                endgame_score REAL,
                overall_rating REAL,
                key_insights TEXT,
                FOREIGN KEY (game_id) REFERENCES games (id)
            )
        ''')

        conn.commit()
        conn.close()

    def save_game(self, game_data: Dict) -> int:
        """ä¿å­˜æ¸¸æˆè®°å½•"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()

        cursor.execute('''
            INSERT INTO games (
                timestamp, mode, duration, black_score, white_score,
                winner, moves_data, board_states
            ) VALUES (?, ?, ?, ?, ?, ?, ?, ?)
        ''', (
            datetime.datetime.now().isoformat(),
            game_data.get('mode', 'unknown'),
            game_data.get('duration', 0),
            game_data.get('black_score', 0),
            game_data.get('white_score', 0),
            game_data.get('winner', 'unknown'),
            json.dumps(game_data.get('moves', [])),
            json.dumps(game_data.get('board_states', []))
        ))

        game_id = cursor.lastrowid
        conn.commit()
        conn.close()
        return game_id

    def get_unanalyzed_games(self) -> List[Dict]:
        """è·å–æœªåˆ†æçš„æ¸¸æˆè®°å½•"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()

        cursor.execute('''
            SELECT * FROM games WHERE analyzed = FALSE
            ORDER BY timestamp DESC
        ''')

        games = []
        for row in cursor.fetchall():
            games.append({
                'id': row[0],
                'timestamp': row[1],
                'mode': row[2],
                'duration': row[3],
                'black_score': row[4],
                'white_score': row[5],
                'winner': row[6],
                'moves': json.loads(row[7]),
                'board_states': json.loads(row[8])
            })

        conn.close()
        return games

    def save_analysis(self, game_id: int, analysis: 'GameAnalysis'):
        """ä¿å­˜åˆ†æç»“æœ"""
        conn = sqlite3.connect(self.db_path)
        cursor = conn.cursor()

        # æ›´æ–°æ¸¸æˆè®°å½•
        cursor.execute('''
            UPDATE games
            SET analyzed = TRUE, analysis_data = ?
            WHERE id = ?
        ''', (json.dumps(analysis.__dict__, default=str), game_id))

        # æ’å…¥åˆ†ææ‘˜è¦
        cursor.execute('''
            INSERT INTO analyses (
                game_id, analysis_timestamp, overall_rating, key_insights
            ) VALUES (?, ?, ?, ?)
        ''', (
            game_id,
            datetime.datetime.now().isoformat(),
            analysis.overall_rating,
            json.dumps(analysis.improvement_suggestions)
        ))

        conn.commit()
        conn.close()
```

### 5.3 åˆ†ææµç¨‹è‡ªåŠ¨åŒ–

#### 5.3.1 è‡ªåŠ¨åˆ†æä»»åŠ¡è°ƒåº¦
**ä»»åŠ¡ç¼–å·**: AI-03
**ä¼˜å…ˆçº§**: ä¸­
**é¢„è®¡å·¥æœŸ**: 1å¤©

```python
# æ–‡ä»¶: ai_analysis/game_analyzer.py
import threading
import time
import logging
from typing import Optional
from .deepseek_client import DeepSeekClient, GameAnalysis
from ..data.game_database import GameDatabase

class GameAnalyzer:
    def __init__(self, deepseek_client: DeepSeekClient, database: GameDatabase):
        self.client = deepseek_client
        self.database = database
        self.analysis_thread: Optional[threading.Thread] = None
        self.running = False
        self.logger = logging.getLogger(__name__)

    def start_auto_analysis(self, interval: int = 30):
        """å¯åŠ¨è‡ªåŠ¨åˆ†ææœåŠ¡"""
        if self.running:
            return

        self.running = True
        self.analysis_thread = threading.Thread(
            target=self._analysis_worker,
            args=(interval,),
            daemon=True
        )
        self.analysis_thread.start()
        self.logger.info("è‡ªåŠ¨åˆ†ææœåŠ¡å·²å¯åŠ¨")

    def stop_auto_analysis(self):
        """åœæ­¢è‡ªåŠ¨åˆ†ææœåŠ¡"""
        self.running = False
        if self.analysis_thread:
            self.analysis_thread.join()
        self.logger.info("è‡ªåŠ¨åˆ†ææœåŠ¡å·²åœæ­¢")

    def _analysis_worker(self, interval: int):
        """åˆ†æå·¥ä½œçº¿ç¨‹"""
        while self.running:
            try:
                unanalyzed_games = self.database.get_unanalyzed_games()

                for game in unanalyzed_games:
                    if not self.running:
                        break

                    self.logger.info(f"æ­£åœ¨åˆ†ææ¸¸æˆ #{game['id']}")

                    try:
                        analysis = self.client.analyze_game(game)
                        self.database.save_analysis(game['id'], analysis)
                        self.logger.info(f"æ¸¸æˆ #{game['id']} åˆ†æå®Œæˆ")

                        # ç”Ÿæˆåˆ†ææŠ¥å‘Š
                        self._generate_report(game['id'], analysis)

                    except Exception as e:
                        self.logger.error(f"åˆ†ææ¸¸æˆ #{game['id']} å¤±è´¥: {e}")

                # ç­‰å¾…æŒ‡å®šé—´éš”
                time.sleep(interval)

            except Exception as e:
                self.logger.error(f"åˆ†ææœåŠ¡é”™è¯¯: {e}")
                time.sleep(interval)

    def analyze_game_immediately(self, game_id: int) -> Optional[GameAnalysis]:
        """ç«‹å³åˆ†ææŒ‡å®šæ¸¸æˆ"""
        try:
            # ä»æ•°æ®åº“è·å–æ¸¸æˆæ•°æ®
            game_data = self.database.get_game_by_id(game_id)
            if not game_data:
                return None

            # è°ƒç”¨AIåˆ†æ
            analysis = self.client.analyze_game(game_data)

            # ä¿å­˜åˆ†æç»“æœ
            self.database.save_analysis(game_id, analysis)

            # ç”Ÿæˆåˆ†ææŠ¥å‘Š
            self._generate_report(game_id, analysis)

            return analysis

        except Exception as e:
            self.logger.error(f"ç«‹å³åˆ†æå¤±è´¥: {e}")
            return None

    def _generate_report(self, game_id: int, analysis: GameAnalysis):
        """ç”Ÿæˆåˆ†ææŠ¥å‘Šæ–‡ä»¶"""
        try:
            from .report_generator import ReportGenerator
            generator = ReportGenerator()
            generator.generate_html_report(game_id, analysis)

        except Exception as e:
            self.logger.error(f"ç”ŸæˆæŠ¥å‘Šå¤±è´¥: {e}")
```

#### 5.3.2 åˆ†ææŠ¥å‘Šç”Ÿæˆå™¨
**ä»»åŠ¡ç¼–å·**: AI-04
**ä¼˜å…ˆçº§**: ä½
**é¢„è®¡å·¥æœŸ**: 1å¤©

```python
# æ–‡ä»¶: ai_analysis/report_generator.py
import os
import datetime
from typing import Dict, List
from .deepseek_client import GameAnalysis, MoveAnalysis

class ReportGenerator:
    def __init__(self, output_dir: str = "reports"):
        self.output_dir = output_dir
        os.makedirs(output_dir, exist_ok=True)

    def generate_html_report(self, game_id: int, analysis: GameAnalysis) -> str:
        """ç”ŸæˆHTMLæ ¼å¼çš„åˆ†ææŠ¥å‘Š"""
        timestamp = datetime.datetime.now().strftime("%Y%m%d_%H%M%S")
        filename = f"game_{game_id}_analysis_{timestamp}.html"
        filepath = os.path.join(self.output_dir, filename)

        html_content = self._build_html_report(game_id, analysis)

        with open(filepath, 'w', encoding='utf-8') as f:
            f.write(html_content)

        return filepath

    def _build_html_report(self, game_id: int, analysis: GameAnalysis) -> str:
        """æ„å»ºHTMLæŠ¥å‘Šå†…å®¹"""
        return f"""
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¸æˆ #{game_id} åˆ†ææŠ¥å‘Š</title>
    <style>
        body {{ font-family: 'Microsoft YaHei', Arial, sans-serif; margin: 40px; }}
        .header {{ text-align: center; margin-bottom: 30px; }}
        .section {{ margin: 20px 0; padding: 15px; border-left: 4px solid #007acc; background-color: #f9f9f9; }}
        .move-analysis {{ margin: 10px 0; padding: 10px; border: 1px solid #ddd; }}
        .move-excellent {{ border-color: #4CAF50; background-color: #E8F5E8; }}
        .move-good {{ border-color: #2196F3; background-color: #E3F2FD; }}
        .move-inaccurate {{ border-color: #FF9800; background-color: #FFF3E0; }}
        .move-mistake {{ border-color: #FF5722; background-color: #FFEBEE; }}
        .move-blunder {{ border-color: #F44336; background-color: #FFEBEE; }}
        .score {{ font-weight: bold; color: #007acc; }}
        .suggestions {{ background-color: #E8F4FD; padding: 15px; border-radius: 5px; }}
    </style>
</head>
<body>
    <div class="header">
        <h1>STM32é»‘ç™½æ£‹æ¸¸æˆåˆ†ææŠ¥å‘Š</h1>
        <h2>æ¸¸æˆ #{game_id}</h2>
        <p>ç”Ÿæˆæ—¶é—´: {datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")}</p>
        <p class="score">æ•´ä½“è¯„åˆ†: {analysis.overall_rating:.2f}/1.0</p>
    </div>

    <div class="section">
        <h3>ğŸ“Š å¼€å±€åˆ†æ</h3>
        <p>{analysis.opening_evaluation}</p>
    </div>

    <div class="section">
        <h3>ğŸ¯ ä¸­ç›˜åˆ†æ</h3>
        <p>{analysis.middle_game_analysis}</p>
    </div>

    <div class="section">
        <h3>ğŸ ç»ˆå±€è¯„ä¼°</h3>
        <p>{analysis.endgame_assessment}</p>
    </div>

    <div class="section">
        <h3>ğŸ“‹ é€æ­¥èµ°æ³•åˆ†æ</h3>
        {self._build_moves_section(analysis.move_analyses)}
    </div>

    <div class="section suggestions">
        <h3>ğŸ’¡ æ”¹è¿›å»ºè®®</h3>
        <ul>
            {''.join(f'<li>{suggestion}</li>' for suggestion in analysis.improvement_suggestions)}
        </ul>
    </div>

    <div class="section">
        <h3>â­ å…³é”®æ—¶åˆ»</h3>
        <p>å…³é”®å›åˆ: {', '.join(map(str, analysis.key_moments))}</p>
    </div>
</body>
</html>
"""

    def _build_moves_section(self, moves: List[MoveAnalysis]) -> str:
        """æ„å»ºèµ°æ³•åˆ†æéƒ¨åˆ†"""
        moves_html = ""
        for i, move in enumerate(moves, 1):
            css_class = f"move-{move.move_quality}"
            quality_emoji = {
                'excellent': 'ğŸŒŸ',
                'good': 'ğŸ‘',
                'inaccurate': 'âš ï¸',
                'mistake': 'âŒ',
                'blunder': 'ğŸ’¥'
            }.get(move.move_quality, 'â“')

            alternatives = ', '.join(move.alternative_moves) if move.alternative_moves else 'æ— '

            moves_html += f'''
                <div class="move-analysis {css_class}">
                    <strong>{i}. {move.move_notation}</strong>
                    <span style="float: right;">{quality_emoji} è¯„åˆ†: {move.evaluation_score:.2f}</span>
                    <br>
                    <small>æ›´å¥½é€‰æ‹©: {alternatives}</small>
                    <br>
                    <em>{move.explanation}</em>
                </div>
            '''

        return moves_html
```

### 5.4 é›†æˆæµ‹è¯•è®¡åˆ’

#### 5.4.1 åŠŸèƒ½æµ‹è¯•ç”¨ä¾‹
**ä»»åŠ¡ç¼–å·**: TEST-01
**é¢„è®¡å·¥æœŸ**: 1å¤©

**æµ‹è¯•ç”¨ä¾‹æ¸…å•**:
1. **æ•°æ®ä¼ è¾“æµ‹è¯•**:
   - [ ] STM32â†’PCæ¸¸æˆæ•°æ®ä¼ è¾“å®Œæ•´æ€§
   - [ ] èµ°æ³•è®°å½•æ ¼å¼æ­£ç¡®æ€§
   - [ ] æ—¶é—´æˆ³åŒæ­¥å‡†ç¡®æ€§

2. **APIè°ƒç”¨æµ‹è¯•**:
   - [ ] DeepSeek APIè¿æ¥ç¨³å®šæ€§
   - [ ] è¯·æ±‚å“åº”æ—¶é—´(<30ç§’)
   - [ ] é”™è¯¯å¤„ç†æœºåˆ¶æœ‰æ•ˆæ€§

3. **åˆ†æè´¨é‡æµ‹è¯•**:
   - [ ] å·²çŸ¥ç»å…¸æ£‹å±€åˆ†æå‡†ç¡®æ€§
   - [ ] é”™è¯¯èµ°æ³•è¯†åˆ«èƒ½åŠ›
   - [ ] æ”¹è¿›å»ºè®®åˆç†æ€§

4. **ç”¨æˆ·ä½“éªŒæµ‹è¯•**:
   - [ ] åˆ†ææŠ¥å‘Šå¯è¯»æ€§
   - [ ] ç•Œé¢æ“ä½œæµç•…æ€§
   - [ ] å¤šè¯­è¨€æ”¯æŒ(ä¸­è‹±æ–‡)

#### 5.4.2 æ€§èƒ½åŸºå‡†æµ‹è¯•
**ä»»åŠ¡ç¼–å·**: TEST-02
**é¢„è®¡å·¥æœŸ**: 0.5å¤©

**æ€§èƒ½æŒ‡æ ‡**:
- å•å±€åˆ†ææ—¶é—´: <60ç§’
- å†…å­˜å ç”¨: <500MB
- å¹¶å‘åˆ†æèƒ½åŠ›: â‰¥3å±€åŒæ—¶å¤„ç†
- æŠ¥å‘Šç”Ÿæˆé€Ÿåº¦: <5ç§’

---

## 6. å¼€å‘é‡Œç¨‹ç¢‘ä¸æ—¶é—´è§„åˆ’

### 6.1 æ€»ä½“æ—¶é—´çº¿

```
æ—¶é—´è½´ (4å‘¨å¼€å‘å‘¨æœŸ)
Week 1    â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚ ç¡¬ä»¶é©±åŠ¨å±‚
Week 2    â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚ æ¸¸æˆé€»è¾‘å±‚
Week 3    â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚ ç”¨æˆ·ç•Œé¢å±‚
Week 4    â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ”‚ è¿›é˜¶åŠŸèƒ½é›†æˆ
```

### 6.2 è¯¦ç»†é‡Œç¨‹ç¢‘è§„åˆ’

| é‡Œç¨‹ç¢‘ | æ—¶é—´èŠ‚ç‚¹ | å…³é”®äº¤ä»˜ç‰© | éªŒæ”¶æ ‡å‡† | é£é™©ç­‰çº§ |
|--------|----------|------------|----------|----------|
| **M1: ç¡¬ä»¶é©±åŠ¨å®Œæˆ** | Week 1 End | LEDé©±åŠ¨ã€é”®ç›˜é©±åŠ¨ã€UARTåè®® | æ‰€æœ‰ç¡¬ä»¶åŠŸèƒ½æ­£å¸¸ | ğŸŸ¡ ä¸­ |
| **M2: æ¸¸æˆæ ¸å¿ƒå®Œæˆ** | Week 2 End | é»‘ç™½æ£‹å¼•æ“ã€AIç®—æ³• | èƒ½è¿›è¡Œå®Œæ•´å¯¹å±€ | ğŸŸ¢ ä½ |
| **M3: UIç³»ç»Ÿå®Œæˆ** | Week 3 End | çŠ¶æ€æœºã€æ˜¾ç¤ºæ¸²æŸ“ | ç”¨æˆ·ä½“éªŒæµç•… | ğŸŸ¡ ä¸­ |
| **M4: è¿›é˜¶åŠŸèƒ½å®Œæˆ** | Week 4 End | ç»Ÿè®¡ã€å›æ”¾ã€é€šä¿¡åè®® | æ‰€æœ‰éœ€æ±‚å®ç° | ğŸŸ  é«˜ |
| **M5: AIåˆ†æé›†æˆ** | Week 4+2 End | PCè½¯ä»¶ã€DeepSeeké›†æˆ | åˆ†æåŠŸèƒ½å¯ç”¨ | ğŸŸ  é«˜ |

### 6.3 å…³é”®ä¾èµ–å…³ç³»

```mermaid
graph TD
    A[ç¡¬ä»¶é©±åŠ¨] --> B[æ¸¸æˆé€»è¾‘]
    B --> C[ç”¨æˆ·ç•Œé¢]
    C --> D[è¿›é˜¶åŠŸèƒ½]
    A --> E[é€šä¿¡åè®®]
    E --> F[PCä¸Šä½æœº]
    F --> G[DeepSeeké›†æˆ]
    D --> H[ç³»ç»Ÿé›†æˆæµ‹è¯•]
    G --> H
```

---

## 7. æµ‹è¯•éªŒè¯è®¡åˆ’

### 7.1 å•å…ƒæµ‹è¯•è§„åˆ’

#### 7.1.1 ç¡¬ä»¶é©±åŠ¨æµ‹è¯•
**æµ‹è¯•èŒƒå›´**: WS2812Bã€é”®ç›˜ã€UARTæ¨¡å—
**æµ‹è¯•æ–¹æ³•**:
- æ¨¡å—ç‹¬ç«‹æµ‹è¯•
- è¾¹ç•Œæ¡ä»¶éªŒè¯
- å¼‚å¸¸æƒ…å†µå¤„ç†

**æµ‹è¯•ç”¨ä¾‹ç¤ºä¾‹**:
```c
// æ–‡ä»¶: Tests/test_ws2812b.c
void test_WS2812B_single_led(void) {
    // æµ‹è¯•å•ä¸ªLEDæ§åˆ¶
    WS2812B_SetPixel(0, 0, (RGB_Color_t){255, 0, 0});  // çº¢è‰²
    WS2812B_Update();
    // éªŒè¯: ç›®è§†æ£€æŸ¥(0,0)ä½ç½®ä¸ºçº¢è‰²
    assert(true);  // äººå·¥ç¡®è®¤
}

void test_WS2812B_full_matrix(void) {
    // æµ‹è¯•å…¨çŸ©é˜µæ˜¾ç¤º
    for(uint8_t row = 0; row < 8; row++) {
        for(uint8_t col = 0; col < 8; col++) {
            WS2812B_SetPixel(row, col, (RGB_Color_t){col*32, row*32, 128});
        }
    }
    WS2812B_Update();
    // éªŒè¯: æ¸å˜è‰²æ˜¾ç¤ºæ­£å¸¸
}
```

#### 7.1.2 æ¸¸æˆé€»è¾‘æµ‹è¯•
**æµ‹è¯•èŒƒå›´**: è§„åˆ™å¼•æ“ã€AIç®—æ³•ã€çŠ¶æ€ç®¡ç†
**æµ‹è¯•æ–¹æ³•**:
- å·²çŸ¥æ£‹å±€éªŒè¯
- è¾¹ç•Œæƒ…å†µæµ‹è¯•
- æ€§èƒ½å‹åŠ›æµ‹è¯•

**æµ‹è¯•ç”¨ä¾‹åº“**:
```c
// æ–‡ä»¶: Tests/test_game_logic.c
typedef struct {
    char* name;
    PieceType_t initial_board[8][8];
    Move_t test_move;
    uint8_t expected_flips;
    bool expected_valid;
} TestCase_t;

TestCase_t test_cases[] = {
    {
        .name = "Initial Black Move D3",
        .initial_board = INITIAL_BOARD,
        .test_move = {2, 3, BLACK},
        .expected_flips = 1,
        .expected_valid = true
    },
    // ... æ›´å¤šæµ‹è¯•ç”¨ä¾‹
};

void run_game_logic_tests(void) {
    for(int i = 0; i < sizeof(test_cases)/sizeof(TestCase_t); i++) {
        GameState_t state;
        memcpy(state.board, test_cases[i].initial_board, sizeof(state.board));

        bool valid = Othello_IsValidMove(&state, test_cases[i].test_move.row, test_cases[i].test_move.col);
        assert(valid == test_cases[i].expected_valid);

        if(valid) {
            uint8_t flips = Othello_MakeMove(&state, test_cases[i].test_move.row, test_cases[i].test_move.col);
            assert(flips == test_cases[i].expected_flips);
        }

        printf("âœ“ Test passed: %s\n", test_cases[i].name);
    }
}
```

### 7.2 é›†æˆæµ‹è¯•è§„åˆ’

#### 7.2.1 ç¡¬ä»¶-è½¯ä»¶é›†æˆæµ‹è¯•
**æµ‹è¯•ç›®æ ‡**: éªŒè¯ç¡¬ä»¶é©±åŠ¨ä¸æ¸¸æˆé€»è¾‘çš„ååŒå·¥ä½œ
**æµ‹è¯•åœºæ™¯**:
- å®Œæ•´æ¸¸æˆæµç¨‹è‡ªåŠ¨åŒ–æµ‹è¯•
- ç”¨æˆ·è¾“å…¥å“åº”æµ‹è¯•
- æ˜¾ç¤ºåŒæ­¥æµ‹è¯•

#### 7.2.2 STM32-PCé€šä¿¡é›†æˆæµ‹è¯•
**æµ‹è¯•ç›®æ ‡**: éªŒè¯æ•°æ®ä¼ è¾“çš„å¯é æ€§å’Œå®Œæ•´æ€§
**æµ‹è¯•å·¥å…·**:
- ä¸²å£ç›‘è§†å™¨
- æ•°æ®åŒ…åˆ†æå·¥å…·
- å‹åŠ›æµ‹è¯•è„šæœ¬

### 7.3 ç”¨æˆ·éªŒæ”¶æµ‹è¯•

#### 7.3.1 åŠŸèƒ½éªŒæ”¶æµ‹è¯•æ¸…å•
**åŸºæœ¬åŠŸèƒ½** âœ…:
- [ ] 4Ã—4é”®ç›˜å“åº”æ­£å¸¸ï¼Œæ— è¯¯è§¦å‘
- [ ] 8Ã—8 LEDçŸ©é˜µæ˜¾ç¤ºæ¸…æ™°ï¼Œé¢œè‰²å‡†ç¡®
- [ ] é»‘ç™½æ£‹è§„åˆ™å®ç°æ­£ç¡®ï¼Œæ— é€»è¾‘é”™è¯¯
- [ ] AIå¯¹æˆ˜å¯æ­£å¸¸è¿›è¡Œï¼Œéš¾åº¦åŒºåˆ†æ˜æ˜¾
- [ ] ä¸²å£é€šä¿¡ç¨³å®šï¼Œæ•°æ®ä¼ è¾“å®Œæ•´

**è¿›é˜¶åŠŸèƒ½** âœ…:
- [ ] æ¸¸æˆæ¨¡å¼åˆ‡æ¢åŠŸèƒ½æ­£å¸¸
- [ ] è®¡åˆ†ç»Ÿè®¡ç³»ç»Ÿå‡†ç¡®
- [ ] æ¸¸æˆå›æ”¾åŠŸèƒ½å¯ç”¨
- [ ] æ’è¡Œæ¦œåŠŸèƒ½æ­£å¸¸
- [ ] ç³»ç»Ÿè®¾ç½®åŠŸèƒ½å®Œæ•´

**AIåˆ†æåŠŸèƒ½** âœ…:
- [ ] æ£‹å±€æ•°æ®æ”¶é›†å®Œæ•´
- [ ] DeepSeek APIè°ƒç”¨æˆåŠŸ
- [ ] åˆ†ææŠ¥å‘Šç”Ÿæˆæ­£å¸¸
- [ ] åˆ†æç»“æœå‡†ç¡®åˆç†
- [ ] ç”¨æˆ·ç•Œé¢å‹å¥½æ˜“ç”¨

#### 7.3.2 æ€§èƒ½éªŒæ”¶æµ‹è¯•
**å“åº”æ€§èƒ½**:
- æŒ‰é”®å“åº”æ—¶é—´: <50ms âœ…
- LEDåˆ·æ–°ç‡: â‰¥30Hz âœ…
- AIæ€è€ƒæ—¶é—´: <3ç§’ âœ…
- ä¸²å£é€šä¿¡å»¶è¿Ÿ: <100ms âœ…

**ç¨³å®šæ€§èƒ½**:
- è¿ç»­è¿è¡Œæ—¶é—´: â‰¥4å°æ—¶æ— æ•…éšœ âœ…
- å†…å­˜æ³„æ¼: æ— æ˜æ˜¾å¢é•¿ âœ…
- å¼‚å¸¸å¤„ç†: èƒ½è‡ªåŠ¨æ¢å¤ âœ…

---

## 8. é£é™©è¯„ä¼°ä¸åº”å¯¹ç­–ç•¥

### 8.1 æŠ€æœ¯é£é™©åˆ†æ

| é£é™©é¡¹ç›® | æ¦‚ç‡ | å½±å“åº¦ | é£é™©ç­‰çº§ | åº”å¯¹ç­–ç•¥ |
|----------|------|--------|----------|----------|
| **WS2812Bæ—¶åºé—®é¢˜** | ä¸­ | é«˜ | ğŸŸ  é«˜ | ä½¿ç”¨é€»è¾‘åˆ†æä»ªè°ƒè¯•ï¼Œå‡†å¤‡å¤‡é€‰æ–¹æ¡ˆ |
| **HALåº“å…¼å®¹æ€§** | ä½ | ä¸­ | ğŸŸ¡ ä¸­ | ç‰ˆæœ¬é”å®šï¼Œå……åˆ†æµ‹è¯• |
| **å†…å­˜ä¸è¶³** | ä¸­ | é«˜ | ğŸŸ  é«˜ | ä»£ç ä¼˜åŒ–ï¼Œç®—æ³•ç®€åŒ– |
| **AIç®—æ³•æ€§èƒ½** | é«˜ | ä¸­ | ğŸŸ  é«˜ | åˆ†å±‚å®ç°ï¼Œé€æ­¥ä¼˜åŒ– |
| **DeepSeek APIé™åˆ¶** | ä¸­ | ä¸­ | ğŸŸ¡ ä¸­ | å¤‡é€‰APIï¼Œç¦»çº¿æ¨¡å¼ |

### 8.2 é¡¹ç›®é£é™©ç®¡æ§

#### 8.2.1 æŠ€æœ¯é£é™©åº”å¯¹
1. **ç¡¬ä»¶é©±åŠ¨é£é™©**:
   - æå‰å‡†å¤‡ç¤ºæ³¢å™¨ã€é€»è¾‘åˆ†æä»ªç­‰è°ƒè¯•è®¾å¤‡
   - å‚è€ƒSTå®˜æ–¹ä¾‹ç¨‹å’Œç¤¾åŒºèµ„æº
   - å»ºç«‹ç¡¬ä»¶æµ‹è¯•å°ï¼Œåˆ†æ¨¡å—éªŒè¯

2. **å†…å­˜èµ„æºé£é™©**:
   - å®æ–½ä»£ç Reviewï¼Œä¼˜åŒ–å†…å­˜ä½¿ç”¨
   - ä½¿ç”¨Stack Analyzeråˆ†ææ ˆä½¿ç”¨
   - å¿…è¦æ—¶ç®€åŒ–AIç®—æ³•å¤æ‚åº¦

3. **ç®—æ³•æ€§èƒ½é£é™©**:
   - åˆ†é˜¶æ®µå®ç°ï¼Œå…ˆä¿è¯åŸºç¡€åŠŸèƒ½
   - å‡†å¤‡å¤šå¥—ç®—æ³•æ–¹æ¡ˆ(æŸ¥è¡¨ã€ç®€åŒ–Minimax)
   - å®æ—¶æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–

#### 8.2.2 å¤–éƒ¨ä¾èµ–é£é™©ç®¡æ§
1. **DeepSeek APIé£é™©**:
   - **å¤‡é€‰æ–¹æ¡ˆ**: é›†æˆæœ¬åœ°è½»é‡çº§AIå¼•æ“
   - **é™é¢ç®¡ç†**: å®æ–½APIè°ƒç”¨é¢‘ç‡æ§åˆ¶
   - **ç¦»çº¿æ¨¡å¼**: åŸºç¡€åˆ†æåŠŸèƒ½æœ¬åœ°å®ç°

2. **å¼€å‘æ—¶é—´é£é™©**:
   - **ä¼˜å…ˆçº§ç®¡ç†**: æ ¸å¿ƒåŠŸèƒ½ä¼˜å…ˆï¼Œè¿›é˜¶åŠŸèƒ½å¼¹æ€§è°ƒæ•´
   - **å¹¶è¡Œå¼€å‘**: STM32å›ºä»¶å’ŒPCè½¯ä»¶åŒæ­¥è¿›è¡Œ
   - **ç‰ˆæœ¬æ§åˆ¶**: å»ºç«‹å¯ç”¨ç‰ˆæœ¬é‡Œç¨‹ç¢‘

### 8.3 è´¨é‡ä¿è¯æªæ–½

#### 8.3.1 ä»£ç è´¨é‡ç®¡æ§
- **ç¼–ç æ ‡å‡†**: ä¸¥æ ¼éµå¾ªMISRA-Cè§„èŒƒ
- **ä»£ç å®¡æŸ¥**: å…³é”®æ¨¡å—åŒäººå®¡æŸ¥æœºåˆ¶
- **é™æ€åˆ†æ**: ä½¿ç”¨PC-Lintç­‰å·¥å…·æ£€æŸ¥
- **ç‰ˆæœ¬ç®¡ç†**: Gitåˆ†æ”¯ç®¡ç†ï¼Œæ ‡ç­¾å‘å¸ƒ

#### 8.3.2 æµ‹è¯•è´¨é‡ä¿è¯
- **å•å…ƒæµ‹è¯•**: è¦†ç›–ç‡â‰¥80%
- **é›†æˆæµ‹è¯•**: å…¨åŠŸèƒ½åœºæ™¯è¦†ç›–
- **å‹åŠ›æµ‹è¯•**: é•¿æ—¶é—´ç¨³å®šæ€§éªŒè¯
- **ç”¨æˆ·æµ‹è¯•**: Betaç‰ˆæœ¬ç”¨æˆ·åé¦ˆ

---

## æ€»ç»“

æœ¬å¼€å‘ä»»åŠ¡è¿›åº¦è®¡åˆ’è¯¦ç»†è§„åˆ’äº†STM32é»‘ç™½æ£‹æ¸¸æˆçš„å®Œæ•´å¼€å‘æµç¨‹ï¼ŒåŒ…æ‹¬ï¼š

1. **åŸºç¡€åŠŸèƒ½å®ç°** - 4å‘¨å†…å®ŒæˆSTM32ç«¯æ ¸å¿ƒåŠŸèƒ½
2. **è¿›é˜¶åŠŸèƒ½æ‰©å±•** - æ¸¸æˆæ¨¡å¼ã€ç»Ÿè®¡ã€å›æ”¾ç­‰é«˜çº§ç‰¹æ€§
3. **AIåˆ†æé›†æˆ** - åˆ›æ–°æ€§çš„DeepSeekæ£‹å±€åˆ†æåŠŸèƒ½
4. **è´¨é‡ä¿è¯ä½“ç³»** - å…¨é¢çš„æµ‹è¯•å’Œé£é™©ç®¡æ§ç­–ç•¥

è¯¥è®¡åˆ’éµå¾ªç”¨æˆ·æå‡ºçš„"å…«è£å…«è€»"åŸåˆ™ï¼Œæ³¨é‡ï¼š
- è®¤çœŸæŸ¥é˜…ç°æœ‰æ¶æ„ï¼Œå¤ç”¨HALåº“èµ„æº
- å¯»æ±‚ç¡®è®¤æ¯ä¸ªæŠ€æœ¯æ–¹æ¡ˆçš„å¯è¡Œæ€§
- éµå¾ªSTM32å¼€å‘è§„èŒƒï¼Œä¿è¯ä»£ç è´¨é‡
- ä¸»åŠ¨æµ‹è¯•éªŒè¯ï¼Œç¡®ä¿åŠŸèƒ½ç¨³å®šå¯é 

**é¢„æœŸäº¤ä»˜æˆæœ**:
- âœ… åŠŸèƒ½å®Œæ•´çš„STM32é»‘ç™½æ£‹æ¸¸æˆç³»ç»Ÿ
- âœ… æ™ºèƒ½åŒ–çš„PCä¸Šä½æœºåˆ†æè½¯ä»¶
- âœ… é›†æˆDeepSeek AIçš„æ£‹å±€åˆ†æå¹³å°
- âœ… å®Œå–„çš„æŠ€æœ¯æ–‡æ¡£å’Œç”¨æˆ·æ‰‹å†Œ

é€šè¿‡ç³»ç»ŸåŒ–çš„å¼€å‘ç®¡ç†å’Œé£é™©ç®¡æ§ï¼Œç¡®ä¿é¡¹ç›®åœ¨4-5å‘¨å†…é«˜è´¨é‡äº¤ä»˜ã€‚